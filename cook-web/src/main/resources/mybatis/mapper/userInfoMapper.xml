<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >  
<mapper namespace="com.colleage.cook.mapper.UserInfoMapper">

	<resultMap type="com.colleage.cook.domain.UserInfo" id="BaseResultMap">
		<id column="id" property="id" jdbcType="INTEGER" />
		<result column="username" property="username" jdbcType="VARCHAR" />
		<result column="password" property="password" jdbcType="VARCHAR" />
		<result column="avatar" property="avatar" jdbcType="VARCHAR" />
		<result column="create_time" property="create_time" jdbcType="VARCHAR" />
		<result column="email" property="email" jdbcType="VARCHAR" />
		<result column="last_login" property="last_login" jdbcType="VARCHAR" />
		<result column="mobile" property="mobile" jdbcType="INTEGER" />
		<result column="status" property="status" jdbcType="INTEGER" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="gender" property="gender" jdbcType="VARCHAR" />
		<result column="favors" property="favors" jdbcType="INTEGER" />
		<result column="follows" property="follows" jdbcType="INTEGER" />
		<result column="signature" property="signature" jdbcType="VARCHAR" />
		<result column="production" property="production" jdbcType="INTEGER" />
		<result column="menus" property="menus" jdbcType="INTEGER" />
		<result column="role_id" property="role_id" jdbcType="INTEGER" />
	</resultMap>

	<sql id="column_list">
		id, username, password, avatar, DATE_FORMAT(create_time, "%Y-%m-%d") create_time, email,
		DATE_FORMAT(last_login, "%Y-%m-%d") last_login, mobile, status, name,
		(CASE gender WHEN 1 THEN "男" WHEN 2 THEN "女" ELSE "未知" END) gender, favors, follows, signature, production,
		menus, role_id
	</sql>

	<select id="findUserInfoByUsername" resultMap="BaseResultMap">
		select <include refid="column_list"></include> FROM user_info where username = #{username}
	</select>
</mapper>